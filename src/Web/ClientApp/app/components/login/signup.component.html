<div>
    <div class="container container-fluid">
        <header class="pageHeader">
            <h3><i class="fa fa-user fa-lg page-caption"><i class="fa fa-plus fa-xs"></i></i> {{'signUp.header' | translate}}</h3>
        </header>

        <form class="form-horizontal" *ngIf="formResetToggle" name="signupForm" #f="ngForm" novalidate
              (ngSubmit)="f.form.valid ? save() :
                (!firstName.valid && showErrorAlert(firstName_validation_required_title, firstName_validation_required_message));
                (!lastName.valid && showErrorAlert(lastName_validation_required_title, lastName_validation_required_message));
                (!mobile.valid && mobile.errors.required && showErrorAlert(mobile_validation_required_title, mobile_validation_required_message));
                (!mobile.valid && mobile.errors.pattern && showErrorAlert(mobile_validation_pattern_title, mobile_validation_pattern_message));
                (!email.valid && email.errors.required && showErrorAlert(email_validation_required_title, email_validation_required_message));
                (!email.valid && email.errors.pattern && showErrorAlert(email_validation_pattern_title, email_validation_pattern_message));
                (!password.valid && password.errors.required && showErrorAlert(password_validation_required_title, password_validation_required_message));
                (!password.valid && password.errors.pattern && showErrorAlert(password_validation_pattern_title, password_validation_pattern_message));
                (!confirmPassword.valid && confirmPassword.errors.required && showErrorAlert(confirmPassword_validation_required_title, confirmPassword_validation_required_message));
                (!confirmPassword.valid && confirmPassword.errors.validateEqual && showErrorAlert(confirmPassword_validation_mismatch_title, confirmPassword_validation_mismatch_message));
                
                ">

            <!--firstName-->
            <div class="form-group has-feedback col-md-6 col-sm-6" [ngClass]="{'has-success': f.submitted && firstName.valid, 'has-error' : f.submitted && !firstName.valid}">
                <label class="control-label" for="firstName-{{uniqueId}}">{{'signUp.firstName.label' | translate}}</label>

                <input type="text"
                       attr.id="firstName-{{uniqueId}}"
                       name="firstName"
                       #firstName="ngModel"
                       placeholder="{{'signUp.firstName.hint' | translate}}"
                       class="form-control input-sm"
                       [(ngModel)]="newUser.firstName"
                       required maxlength="50" autofocus/>
                <span *ngIf="showValidationErrors && f.submitted" class="glyphicon form-control-feedback" [ngClass]="{'glyphicon-ok ': firstName.valid, 'glyphicon-remove' : !firstName.valid}"></span>
                <span *ngIf="showValidationErrors && f.submitted && !firstName.valid" class="errorMessage">
                    {{'signUp.firstName.validation.required.title' | translate}}
                </span>

            </div>

            <!--lastName-->
            <div class="form-group has-feedback col-md-6 col-sm-6" [ngClass]="{'has-success': f.submitted && lastName.valid, 'has-error' : f.submitted && !lastName.valid}">
                <label class="control-label" for="lastName-{{uniqueId}}">{{'signUp.lastName.label' | translate}}</label>
                <input type="text"
                       attr.id="lastName-{{uniqueId}}"
                       name="lastName"
                       #lastName="ngModel"
                       placeholder="{{'signUp.lastName.hint' | translate}}"
                       class="form-control input-sm"
                       [(ngModel)]="newUser.lastName" required maxlength="50" />
                <span *ngIf="showValidationErrors && f.submitted" class="glyphicon form-control-feedback" [ngClass]="{'glyphicon-ok ': lastName.valid, 'glyphicon-remove' : !lastName.valid}"></span>
                <span *ngIf="showValidationErrors && f.submitted && !lastName.valid" class="errorMessage">
                    {{'signUp.lastName.validation.required.title' | translate}}
                </span>
            </div>

            <!--mobile-->
            <div class="form-group has-feedback col-md-6 col-sm-6" [ngClass]="{'has-success': f.submitted && mobile.valid, 'has-error' : f.submitted && !mobile.valid}">
                <label class="control-label" for="mobile-{{uniqueId}}">{{'signUp.mobile.label' | translate}}</label>
                <input type="tel"
                       attr.id="mobile-{{uniqueId}}"
                       name="mobile"
                       #mobile="ngModel"
                       placeholder="{{'signUp.mobile.hint' | translate}}"
                       class="form-control input-sm"
                       [(ngModel)]="newUser.mobile"
                       maxlength="13"
                       required pattern="^\+?\d{0,13}" />
                <span *ngIf="showValidationErrors && f.submitted" class="glyphicon form-control-feedback" [ngClass]="{'glyphicon-ok ': mobile.valid, 'glyphicon-remove' : !mobile.valid}"></span>
                <span *ngIf="showValidationErrors && f.submitted && !mobile.valid && mobile.errors.required" class="errorMessage">
                    {{'signUp.mobile.validation.required.title' | translate}}
                </span>
                <span *ngIf="showValidationErrors && f.submitted && !mobile.valid && mobile.errors.pattern" class="errorMessage">
                    {{'signUp.mobile.validation.pattern.title' | translate}}
                </span>
            </div>

            <!--email-->
            <div class="form-group has-feedback col-md-6 col-sm-6" [ngClass]="{'has-success': f.submitted && email.valid, 'has-error' : f.submitted && !email.valid}">
                <label class="control-label" for="email-{{uniqueId}}">{{'signUp.email.label' | translate}}</label>
                <input type="email"
                       attr.id="email-{{uniqueId}}"
                       name="email"
                       #email="ngModel"
                       placeholder="{{'signUp.email.hint' | translate}}"
                       class="form-control input-sm"
                       [(ngModel)]="newUser.email"
                       maxlength="200"
                       required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$" />
                <span *ngIf="showValidationErrors && f.submitted" class="glyphicon form-control-feedback" [ngClass]="{'glyphicon-ok ': email.valid, 'glyphicon-remove' : !email.valid}"></span>
                <span *ngIf="showValidationErrors && f.submitted && !email.valid && email.errors.required" class="errorMessage">
                    {{'signUp.email.validation.required.title' | translate}}
                </span>
                <span *ngIf="showValidationErrors && f.submitted && !email.valid && email.errors.pattern" class="errorMessage">
                    {{'signUp.email.validation.pattern.title' | translate}}
                </span>
            </div>
            <!--password-->
            <div class="form-group has-feedback col-md-6 col-sm-6" [ngClass]="{'has-success': f.submitted && password.valid, 'has-error' : f.submitted && !password.valid}">
                <label class="control-label" for="password-{{uniqueId}}">{{'signUp.password.label' | translate}}</label>
                <input type="password"
                       attr.id="password-{{uniqueId}}"
                       name="password"
                       #password="ngModel"
                       placeholder="{{'signUp.password.hint' | translate}}"
                       class="form-control input-sm"
                       [(ngModel)]="newUser.newPassword"
                       maxlength="12"
                       required />
                <span *ngIf="showValidationErrors && f.submitted" class="glyphicon form-control-feedback" [ngClass]="{'glyphicon-ok ': password.valid, 'glyphicon-remove' : !password.valid}"></span>
                <span *ngIf="showValidationErrors && f.submitted && !password.valid && password.errors.required" class="errorMessage">
                    {{'signUp.password.validation.required.title' | translate}}
                </span>
                <span *ngIf="showValidationErrors && f.submitted && !password.valid && password.errors.pattern" class="errorMessage">
                    {{'signUp.password.validation.pattern.title' | translate}}
                </span>
            </div>
            <!--confirmPassword-->
            <div class="form-group has-feedback col-md-6 col-sm-6" [ngClass]="{'has-success': f.submitted && confirmPassword.valid, 'has-error' : f.submitted && !confirmPassword.valid}">
                <label class="control-label" for="confirmPassword-{{uniqueId}}">{{'signUp.confirmPassword.label' | translate}}</label>
                <input type="password"
                       attr.id="confirmPassword-{{uniqueId}}"
                       name="confirmPassword"
                       #confirmPassword="ngModel"
                       placeholder="{{'signUp.confirmPassword.hint' | translate}}"
                       class="form-control input-sm"
                       [(ngModel)]="newUser.confirmPassword"
                       maxlength="12"
                       required validateEqual="password"/>
                <span *ngIf="showValidationErrors && f.submitted" class="glyphicon form-control-feedback" [ngClass]="{'glyphicon-ok ': confirmPassword.valid, 'glyphicon-remove' : !confirmPassword.valid}"></span>
                <span *ngIf="showValidationErrors && f.submitted && !confirmPassword.valid && confirmPassword.errors.required" class="errorMessage">
                    {{'signUp.confirmPassword.validation.required.title' | translate}}
                </span>
                <span *ngIf="showValidationErrors && f.submitted && !confirmPassword.valid && confirmPassword.errors?.validateEqual" class="errorMessage">
                    {{'signUp.confirmPassword.validation.mismatch.title' | translate}}
                </span>
            </div>
            <div class="col-md-12">
                <hr class="separator-hr" />
            </div>
            <div class="form-group">
                <div class="col-md-12">
                    <button type="submit" class="btn btn-primary" [disabled]="isLoading"><i *ngIf="isLoading" class='fa fa-circle-o-notch fa-spin'></i> {{isLoading ? ('signUp.signingUp' | translate) : ('signUp.signUp' | translate)}}</button>
                    <button type="button" class="btn btn-danger" [disabled]="isLoading" (click)="cancel()"><i *ngIf="isLoading" class='fa fa-circle-o-notch fa-spin'></i> {{'signUp.cancel' | translate}}</button>
                </div>
            </div>

        </form>
    </div>
</div>